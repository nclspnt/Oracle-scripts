@display_configuration.sql


col SQL_PLAN_HASH_VALUE format 999999999999999999
col TM_DELTA_TIME_SECOND format 999999999,99
col DELTA_READ_IO_BYTES format 999999999,99
col DELTA_WRITE_IO_BYTES format 999999999,99
col DELTA_INTERCONNECT_IO_BYTES format 999999999,99

select 
trunc(SAMPLE_TIME,'MI') SAMPLE_TIME_MINUTE,
count(SESSION_ID||','||SESSION_SERIAL#) NB_SESSION,
SQL_PLAN_HASH_VALUE,
sum(TM_DELTA_TIME)/1000000 TM_DELTA_TIME_SECOND,
sum(DELTA_READ_IO_BYTES)/1024/1024 DELTA_READ_IO_MB,
sum(DELTA_WRITE_IO_BYTES)/1024/1024 DELTA_WRITE_IO_MB,
sum(DELTA_INTERCONNECT_IO_BYTES)/1024/1024 DELTA_INTERCONNECT_IO_MB
from gv$active_session_history
where sql_id = '&sql_id.'
and SAMPLE_TIME > sysdate - 1/24
group by trunc(SAMPLE_TIME,'MI'), SQL_PLAN_HASH_VALUE
order by 1 desc
;
